% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ggplot_utils.R
\name{add_stat_annotations_auto}
\alias{add_stat_annotations_auto}
\title{Add Statistical Annotations with Auto Y-limit Adjustment}
\usage{
add_stat_annotations_auto(
  plot,
  pwc,
  label =
    "{ifelse(p.adj < 0.0001, 'p<0.0001', paste('p=', format.pval(round(p.adj, 4))))}",
  step.increase = 0.05,
  label.size = 5,
  bracket.size = 0.6,
  tip.length = 0,
  y.buffer = 0.1,
  min.y = 0,
  ...
)
}
\arguments{
\item{plot}{ggplot object to add annotations to}

\item{pwc}{Data frame with pairwise comparison results that has been preprocessed with rstatix::add_xy_position(). Must contain columns 'group1', 'group2', 'xmin', 'xmax', 'y.position', and a p-value column}

\item{label}{Character. Label format for p-values (default: "{ifelse(p.adj < 0.0001, 'p<0.0001', paste('p=', format.pval(round(p.adj, 4))))}")}

\item{step.increase}{Numeric. Step increase for automatic y.position adjustment (default: 0.05)}

\item{label.size}{Numeric. Size of annotation labels (default: 5)}

\item{bracket.size}{Numeric. Size of annotation brackets (default: 0.6)}

\item{tip.length}{Numeric. Length of bracket tips (default: 0)}

\item{y.buffer}{Numeric. Additional buffer to add above the highest annotation (default: 0.1)}

\item{min.y}{Numeric. Minimum y-axis value (default: 0)}

\item{...}{Additional parameters passed to ggpubr::stat_pvalue_manual()}
}
\value{
Modified ggplot object with statistical annotations and adjusted y-limits
}
\description{
Convenience function that adds statistical annotations and automatically adjusts
y-axis limits based on the maximum annotation position plus a buffer.
Note: pwc must be preprocessed with rstatix::add_xy_position(pwc, x = "x") before using this function.
}
\examples{
\dontrun{
# Create sample data and plot
df <- data.frame(
  x = rep(c("A", "B", "C"), each = 10), 
  y = c(rnorm(10, 5, 1), rnorm(10, 7, 1), rnorm(10, 6, 1))
)

# Create base plot
p <- create_complete_barplot(df, title = "Auto Y-limit Adjustment", 
                             xlabel = "Groups", ylabel = "Values")

# Sample pairwise comparison data
pwc <- data.frame(
  group1 = c("A", "A", "B"),
  group2 = c("B", "C", "C"),
  p.adj = c(0.001, 0.05, 0.12)
)

# Preprocess pwc with rstatix
pwc <- rstatix::add_xy_position(pwc, x = "x")

# Add statistical annotations with auto y-limit adjustment
p_auto <- add_stat_annotations_auto(p, pwc)
print(p_auto)
}
}
